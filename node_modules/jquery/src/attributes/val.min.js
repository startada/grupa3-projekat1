define(["../core","../core/stripAndCollapse","./support","../core/nodeName","../var/isFunction","../core/init"],function(d,b,a,f,e){var c=/\r/g;d.fn.extend({val:function(k){var h,i,g,j=this[0];if(!arguments.length){if(j){h=d.valHooks[j.type]||d.valHooks[j.nodeName.toLowerCase()];if(h&&"get" in h&&(i=h.get(j,"value"))!==undefined){return i}i=j.value;if(typeof i==="string"){return i.replace(c,"")}return i==null?"":i}return}g=e(k);return this.each(function(l){var m;if(this.nodeType!==1){return}if(g){m=k.call(this,l,d(this).val())}else{m=k}if(m==null){m=""}else{if(typeof m==="number"){m+=""}else{if(Array.isArray(m)){m=d.map(m,function(n){return n==null?"":n+""})}}}h=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()];if(!h||!("set" in h)||h.set(this,m,"value")===undefined){this.value=m}})}});d.extend({valHooks:{option:{get:function(g){var h=d.find.attr(g,"value");return h!=null?h:b(d.text(g))}},select:{get:function(g){var n,j,h,p=g.options,l=g.selectedIndex,k=g.type==="select-one",o=k?null:[],m=k?l+1:p.length;if(l<0){h=m}else{h=k?l:0}for(;h<m;h++){j=p[h];if((j.selected||h===l)&&!j.disabled&&(!j.parentNode.disabled||!f(j.parentNode,"optgroup"))){n=d(j).val();if(k){return n}o.push(n)}}return o},set:function(l,m){var n,k,h=l.options,g=d.makeArray(m),j=h.length;while(j--){k=h[j];if(k.selected=d.inArray(d.valHooks.option.get(k),g)>-1){n=true}}if(!n){l.selectedIndex=-1}return g}}}});d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(g,h){if(Array.isArray(h)){return(g.checked=d.inArray(d(g).val(),h)>-1)}}};if(!a.checkOn){d.valHooks[this].get=function(g){return g.getAttribute("value")===null?"on":g.value}}})});