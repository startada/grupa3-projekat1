define(["../core","../var/rcssNum"],function(f,d){function e(u,v,r,b){var a,t,p=20,c=b?function(){return b.cur()}:function(){return f.css(u,v,"")},q=c(),o=r&&r[3]||(f.cssNumber[v]?"":"px"),s=(f.cssNumber[v]||o!=="px"&&+q)&&d.exec(f.css(u,v));if(s&&s[3]!==o){q=q/2;o=o||s[3];s=+q||1;while(p--){f.style(u,v,s+o);if((1-t)*(1-(t=c()/q||0.5))<=0){p=0}s=s/t}s=s*2;f.style(u,v,s+o);r=r||[]}if(r){s=+s||+q||0;a=r[1]?s+(r[1]+1)*r[2]:+r[2];if(b){b.unit=o;b.start=s;b.end=a}}return a}return e});