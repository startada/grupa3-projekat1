define(["./core","./var/document","./var/documentElement","./var/isFunction","./var/rnothtmlwhite","./var/slice","./data/var/dataPriv","./core/nodeName","./core/init","./selector"],function(n,h,k,b,f,j,o,i){var m=/^key/,d=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,c=/^([^.]*)(?:\.(.+)|)/;function e(){return true}function a(){return false}function l(){try{return h.activeElement}catch(p){}}function g(u,r,p,v,t,q){var w,s;if(typeof r==="object"){if(typeof p!=="string"){v=v||p;p=undefined}for(s in r){g(u,s,p,v,r[s],q)}return u}if(v==null&&t==null){t=p;v=p=undefined}else{if(t==null){if(typeof p==="string"){t=v;v=undefined}else{t=v;v=p;p=undefined}}}if(t===false){t=a}else{if(!t){return u}}if(q===1){w=t;t=function(x){n().off(x);return w.apply(this,arguments)};t.guid=w.guid||(w.guid=n.guid++)}return u.each(function(){n.event.add(this,r,t,v,p)})}n.event={global:{},add:function(u,z,G,w,v){var r,y,x,F,E,D,B,s,C,p,q,A=o.get(u);if(!A){return}if(G.handler){r=G;G=r.handler;v=r.selector}if(v){n.find.matchesSelector(k,v)}if(!G.guid){G.guid=n.guid++}if(!(F=A.events)){F=A.events={}}if(!(y=A.handle)){y=A.handle=function(t){return typeof n!=="undefined"&&n.event.triggered!==t.type?n.event.dispatch.apply(u,arguments):undefined}}z=(z||"").match(f)||[""];E=z.length;while(E--){x=c.exec(z[E])||[];C=q=x[1];p=(x[2]||"").split(".").sort();if(!C){continue}B=n.event.special[C]||{};C=(v?B.delegateType:B.bindType)||C;B=n.event.special[C]||{};D=n.extend({type:C,origType:q,data:w,handler:G,guid:G.guid,selector:v,needsContext:v&&n.expr.match.needsContext.test(v),namespace:p.join(".")},r);if(!(s=F[C])){s=F[C]=[];s.delegateCount=0;if(!B.setup||B.setup.call(u,w,p,y)===false){if(u.addEventListener){u.addEventListener(C,y)}}}if(B.add){B.add.call(u,D);if(!D.handler.guid){D.handler.guid=G.guid}}if(v){s.splice(s.delegateCount++,0,D)}else{s.push(D)}n.event.global[C]=true}},remove:function(s,z,G,u,y){var w,v,x,F,E,D,B,r,C,p,q,A=o.hasData(s)&&o.get(s);if(!A||!(F=A.events)){return}z=(z||"").match(f)||[""];E=z.length;while(E--){x=c.exec(z[E])||[];C=q=x[1];p=(x[2]||"").split(".").sort();if(!C){for(C in F){n.event.remove(s,C+z[E],G,u,true)}continue}B=n.event.special[C]||{};C=(u?B.delegateType:B.bindType)||C;r=F[C]||[];x=x[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");v=w=r.length;while(w--){D=r[w];if((y||q===D.origType)&&(!G||G.guid===D.guid)&&(!x||x.test(D.namespace))&&(!u||u===D.selector||u==="**"&&D.selector)){r.splice(w,1);if(D.selector){r.delegateCount--}if(B.remove){B.remove.call(s,D)}}}if(v&&!r.length){if(!B.teardown||B.teardown.call(s,p,A.handle)===false){n.removeEvent(s,C,A.handle)}delete F[C]}}if(n.isEmptyObject(F)){o.remove(s,"handle events")}},dispatch:function(r){var p=n.event.fix(r);var u,t,v,q,z,y,x=new Array(arguments.length),s=(o.get(this,"events")||{})[p.type]||[],w=n.event.special[p.type]||{};x[0]=p;for(u=1;u<arguments.length;u++){x[u]=arguments[u]}p.delegateTarget=this;if(w.preDispatch&&w.preDispatch.call(this,p)===false){return}y=n.event.handlers.call(this,p,s);u=0;while((q=y[u++])&&!p.isPropagationStopped()){p.currentTarget=q.elem;t=0;while((z=q.handlers[t++])&&!p.isImmediatePropagationStopped()){if(!p.rnamespace||p.rnamespace.test(z.namespace)){p.handleObj=z;p.data=z.data;v=((n.event.special[z.origType]||{}).handle||z.handler).apply(q.elem,x);if(v!==undefined){if((p.result=v)===false){p.preventDefault();p.stopPropagation()}}}}}if(w.postDispatch){w.postDispatch.call(this,p)}return p.result},handlers:function(p,r){var v,x,q,s,t,w=[],u=r.delegateCount,y=p.target;if(u&&y.nodeType&&!(p.type==="click"&&p.button>=1)){for(;y!==this;y=y.parentNode||this){if(y.nodeType===1&&!(p.type==="click"&&y.disabled===true)){s=[];t={};for(v=0;v<u;v++){x=r[v];q=x.selector+" ";if(t[q]===undefined){t[q]=x.needsContext?n(q,this).index(y)>-1:n.find(q,this,null,[y]).length}if(t[q]){s.push(x)}}if(s.length){w.push({elem:y,handlers:s})}}}}y=this;if(u<r.length){w.push({elem:y,handlers:r.slice(u)})}return w},addProp:function(p,q){Object.defineProperty(n.Event.prototype,p,{enumerable:true,configurable:true,get:b(q)?function(){if(this.originalEvent){return q(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[p]}},set:function(r){Object.defineProperty(this,p,{enumerable:true,configurable:true,writable:true,value:r})}})},fix:function(p){return p[n.expando]?p:new n.Event(p)},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==l()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===l()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&i(this,"input")){this.click();return false}},_default:function(p){return i(p.target,"a")}},beforeunload:{postDispatch:function(p){if(p.result!==undefined&&p.originalEvent){p.originalEvent.returnValue=p.result}}}}};n.removeEvent=function(q,p,r){if(q.removeEventListener){q.removeEventListener(p,r)}};n.Event=function(q,p){if(!(this instanceof n.Event)){return new n.Event(q,p)}if(q&&q.type){this.originalEvent=q;this.type=q.type;this.isDefaultPrevented=q.defaultPrevented||q.defaultPrevented===undefined&&q.returnValue===false?e:a;this.target=(q.target&&q.target.nodeType===3)?q.target.parentNode:q.target;this.currentTarget=q.currentTarget;this.relatedTarget=q.relatedTarget}else{this.type=q}if(p){n.extend(this,p)}this.timeStamp=q&&q.timeStamp||Date.now();this[n.expando]=true};n.Event.prototype={constructor:n.Event,isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,isSimulated:false,preventDefault:function(){var p=this.originalEvent;this.isDefaultPrevented=e;if(p&&!this.isSimulated){p.preventDefault()}},stopPropagation:function(){var p=this.originalEvent;this.isPropagationStopped=e;if(p&&!this.isSimulated){p.stopPropagation()}},stopImmediatePropagation:function(){var p=this.originalEvent;this.isImmediatePropagationStopped=e;if(p&&!this.isSimulated){p.stopImmediatePropagation()}this.stopPropagation()}};n.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,"char":true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(q){var p=q.button;if(q.which==null&&m.test(q.type)){return q.charCode!=null?q.charCode:q.keyCode}if(!q.which&&p!==undefined&&d.test(q.type)){if(p&1){return 1}if(p&2){return 3}if(p&4){return 2}return 0}return q.which}},n.event.addProp);n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(q,p){n.event.special[q]={delegateType:p,bindType:p,handle:function(t){var r,v=this,u=t.relatedTarget,s=t.handleObj;if(!u||(u!==v&&!n.contains(v,u))){t.type=s.origType;r=s.handler.apply(this,arguments);t.type=p}return r}}});n.fn.extend({on:function(q,p,s,r){return g(this,q,p,s,r)},one:function(q,p,s,r){return g(this,q,p,s,r,1)},off:function(r,p,t){var q,s;if(r&&r.preventDefault&&r.handleObj){q=r.handleObj;n(r.delegateTarget).off(q.namespace?q.origType+"."+q.namespace:q.origType,q.selector,q.handler);return this}if(typeof r==="object"){for(s in r){this.off(s,p,r[s])}return this}if(p===false||typeof p==="function"){t=p;p=undefined}if(t===false){t=a}return this.each(function(){n.event.remove(this,r,t,p)})}});return n});